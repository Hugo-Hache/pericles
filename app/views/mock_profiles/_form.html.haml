- content_for :page_scripts do
  = javascript_include_tag("mock_profiles/form.js")

#mock_profile_form
  = bootstrap_nested_form_for(@mock_profile) do |f|
    = f.text_field :name

    - @project.routes.includes(responses: [:resource_representation, :mock_instances]).order(:url).each do |route|
      .route-container.panel.panel-default
        .panel-heading
          .panel-title
            %h4.url=route.url
        .responses.panel-body
          - route.responses.each do |response|
            .response
              %span.label.status-code{class: response_status_code_class(response.status_code)}=response.status_code
              - if response.resource_representation
                = f.fields_for :mock_pickers, @mock_picker_by_response_id[response.id] do |fields|
                  = fields.select :mock_instance_ids, response.mock_instances.pluck(:name, :id), { include_blank: true, hide_label: true }, multiple: response.is_collection
                  = fields.hidden_field :response_is_favorite, value: false
                  = fields.radio_button :response_is_favorite, true, label: 'Active'
    %p
      = f.submit
