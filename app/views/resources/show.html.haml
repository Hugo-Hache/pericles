- if flash[:error]
  %div{class: "alert alert-danger"}
    =flash[:error]

.page-header
  %h1
    = @resource.name

%p
  = @resource.description

%h3
  Attributes
  = render partial: "shared/last_edit", locals: {last_audit: @resource.last_audit}

%div
  / Nav tabs
  %ul.nav.nav-tabs{ role: "tablist" }
    %li.active{ role: "presentation" }
      %a{ "aria-controls" => "all", "data-toggle" => "tab", href: "#all", role: "tab" } All
  / Tab panes
  .tab-content
    #all.tab-pane.active{ role: "tabpanel" }
      %table{class: "table table-striped"}
        %thead
          %tr
            %th Name
            %th Description
            %th Type
            %th Enum
            %th Scheme
            %th Minimum
            %th Maximum
            %th Minimum length
            %th Maximum length
            %th Nullable
            %th Example
            %th Faker
        %tbody
          - @resource.resource_attributes.sorted_by_name.each do |attribute|
            = render attribute

%h3 Representations

%p
  = link_to 'Add new representation', new_resource_resource_representation_path(@resource)

.list-group
  - @resource.resource_representations.each do |resource_rep|
    %a{class: "list-group-item", href: resource_resource_representation_path(@resource, resource_rep)}
      = resource_rep.name

%h3 Routes

.flexcontainer.flexcontainer-justify-end
  = link_to 'New Route', new_resource_route_path(@resource), class: "btn btn-default btn-lg"

.margin-top-element
  - if @resource.routes.any?
    - @resource.routes.includes(:resource_representations).each do |route|
      .panel.panel-default
        .panel-body
          .row
            .col-xs-2.http-method-column
              %span{ class: get_http_method_label_class(route) }= route.http_method
            .col-xs-3
              %dl
                %dt URL
                %dd= route.url
            .col-xs-3
              %dl
                %dt Description
                %dd= route.description
            .col-xs-3
              - unless route.resource_representations.empty?
                %dl
                  %dt Resource representations
                  %dd= route.resource_representations.uniq.map(&:name).join(", ")
            .col-xs-1
              = link_to 'Show', resource_route_path(@resource, route), class: "btn btn-default btn-md"
  - else
    %p
      %i= t('.no_route_placeholder')

= link_to 'Edit', edit_project_resource_path(@project, @resource)
\|
= link_to "Delete", project_resource_path(@project, @resource), method: :delete, data: { confirm: 'Are you sure ?' }